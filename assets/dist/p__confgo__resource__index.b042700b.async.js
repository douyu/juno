(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{"0PMQ":function(e,t,a){"use strict";a.r(t);a("IzEo");var n=a("bx4M"),r=(a("DYRE"),a("zeV3")),c=(a("g9YV"),a("wCAj")),o=(a("14J3"),a("BMrR")),l=(a("5NDa"),a("5rEg")),i=(a("jCWc"),a("kPKH")),s=(a("+L6B"),a("2/Rp")),u=a("k1fw"),d=(a("+BJd"),a("mr32")),m=a("q1tI"),f=a.n(m),p=a("MuoO"),v=a("Hx5s"),b=(a("2qtc"),a("kLXV")),g=(a("BoS7"),a("Sdc0")),E=(a("OaEy"),a("2fM7")),y=(a("7Kak"),a("9yH6")),O=(a("miYZ"),a("tsqr")),h=(a("y8nQ"),a("Vl3Y")),j=a("tJVT"),x=a("fs4O");function w(e){var t=e.visible,a=e.zoneEnv,n=e.tags,r=h["a"].useForm(),c=Object(j["a"])(r,1),o=c[0],i=Object(m["useState"])(),s=Object(j["a"])(i,2),u=s[0],d=s[1];return Object(m["useEffect"])((function(){t&&(e.loadTags(),e.loadZoneEnvTree())}),[t]),f.a.createElement(b["a"],{width:800,visible:e.visible,title:"\u521b\u5efa\u8d44\u6e90",onOk:function(){o.submit()},onCancel:function(){return e.showModalCreateResource(!1)}},f.a.createElement(h["a"],{form:o,labelCol:{span:3},onFinish:function(t){Object(x["c"])(t).then((function(t){0===t.code?(e.onOk&&e.onOk(),O["a"].success("\u521b\u5efa\u6210\u529f"),e.showModalCreateResource(!1)):O["a"].error("\u521b\u5efa\u5931\u8d25:"+t.msg)}))}},f.a.createElement(h["a"].Item,{label:"Env",name:"env",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u73af\u5883"}]},f.a.createElement(y["default"].Group,{onChange:function(e){d(e.target.value),o.resetFields(["zone"])}},Object.keys(a).map((function(e){return f.a.createElement(y["default"].Button,{key:e,value:e},e)})))),f.a.createElement(h["a"].Item,{label:"Zone",name:"zone",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u53ef\u7528\u533a"}]},f.a.createElement(E["a"],null,u&&a[u].map((function(e){return f.a.createElement(E["a"].Option,{key:e.zone_code,value:e.zone_code},e.zone_name)})))),f.a.createElement(h["a"].Item,{label:"Tags",name:"tags"},f.a.createElement(E["a"],{mode:"tags"},n&&n.map((function(e){return f.a.createElement(E["a"].Option,{key:e,value:e},e)})))),f.a.createElement(h["a"].Item,{label:"Name",name:"name",rules:[{type:"regexp",pattern:/^[a-zA-Z0-9]{5,32}$/,message:"\u65e0\u6548\u7684\u8d44\u6e90\u540d\u79f0"},{required:!0,message:"\u8bf7\u8f93\u5165\u8d44\u6e90\u540d\u79f0"}]},f.a.createElement(l["a"],null)),f.a.createElement(h["a"].Item,{label:"Value",name:"value",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8d44\u6e90\u503c"}]},f.a.createElement(l["a"].TextArea,null)),f.a.createElement(h["a"].Item,{label:"\u503c\u53ef\u89c1",name:"visible",help:"\u8d44\u6e90\u503c\u5185\u5bb9\u662f\u5426\u516c\u5f00"},f.a.createElement(g["a"],null)),f.a.createElement(h["a"].Item,{label:"Description",name:"description",rules:[{required:!0,message:"\u8bf7\u586b\u5199\u8d44\u6e90\u63cf\u8ff0"}]},f.a.createElement(l["a"].TextArea,null))))}var z=function(e){var t=e.configResource;return{visible:t.modalConfigResourceVisible,zoneEnv:t.zoneEnv,tags:t.tags}},C=function(e){return{loadZoneEnvTree:function(){return e({type:"configResource/loadZoneEnvTree"})},showModalCreateResource:function(t){return e({type:"configResource/showModalCreateResource",payload:t})},loadTags:function(){return e({type:"configResource/loadTags"})}}},k=Object(p["connect"])(z,C),R=k(w),I=a("5CnO"),N=a("7DNP");function P(e){var t=e.visible,a=e.zoneEnv,n=e.tagList,r=e.onOk,c=e.resource,o=c.id,i=c.env,s=c.zone_code,u=c.name,d=c.description,p=c.tags,v=h["a"].useForm(),g=Object(j["a"])(v,1),O=g[0];return Object(m["useEffect"])((function(){t&&(O.resetFields(),e.loadTags())}),[t]),f.a.createElement(b["a"],{width:700,visible:e.visible,title:"\u7f16\u8f91\u8d44\u6e90",onOk:function(){O.submit()},onCancel:function(){return e.showModalEdit({visible:!1})}},f.a.createElement(h["a"],{form:O,labelCol:{span:3},onFinish:function(t){console.log(t),e.createResourceVersion({id:o,value:t.value,tags:t.tags,description:t.description}).then((function(t){0===t.code&&(e.showModalEdit({visible:!1}),r&&r())}))}},f.a.createElement(h["a"].Item,{label:"Env",name:"env",initialValue:i},f.a.createElement(y["default"].Group,{disabled:!0},Object.keys(a).map((function(e){return f.a.createElement(y["default"].Button,{key:e,value:e},e)})))),f.a.createElement(h["a"].Item,{label:"Zone",name:"zone",initialValue:s},f.a.createElement(E["a"],{disabled:!0},i&&a[i].map((function(e){return f.a.createElement(E["a"].Option,{key:e.zone_code,value:e.zone_code},e.zone_name)})))),f.a.createElement(h["a"].Item,{label:"Tags",name:"tags",initialValue:p},f.a.createElement(E["a"],{mode:"tags"},n&&n.map((function(e){return f.a.createElement(E["a"].Option,{key:e,value:e},e)})))),f.a.createElement(h["a"].Item,{label:"Name",name:"name",initialValue:u,rules:[{type:"regexp",pattern:/^[a-zA-Z0-9]{5,32}$/,message:"\u65e0\u6548\u7684\u8d44\u6e90\u540d\u79f0"}]},f.a.createElement(l["a"],{disabled:!0})),f.a.createElement(h["a"].Item,{label:"Value",name:"value",rules:[{required:!0,message:"\u8bf7\u586b\u5199\u8d44\u6e90\u503c"}]},f.a.createElement(l["a"].TextArea,null)),f.a.createElement(h["a"].Item,{label:"Description",name:"description",initialValue:d,required:!0,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u8d44\u6e90\u63cf\u8ff0"}]},f.a.createElement(l["a"].TextArea,{placeholder:"\u63cf\u8ff0\u4e0b\u672c\u8d44\u6e90\u548c\u8d44\u6e90\u53d8\u52a8"}))))}var T=function(e){var t=e.configResource;return{resource:t.currentEditResource,visible:t.modalConfigResourceEditVisible,zoneEnv:t.zoneEnv,tagList:t.tags}},M=function(e){return{showModalEdit:function(t){return e({type:"configResource/showModalEdit",payload:t})},createResourceVersion:function(t){return e({type:"configResource/createResourceVersion",payload:t})},loadTags:function(){return e({type:"configResource/loadTags"})}}},V=Object(p["connect"])(T,M)(P),S=a("wd/R"),q=a.n(S);function L(e){var t=e.zoneEnv,a=e.list,p=e.loadZoneEnvTree,b=e.listLoading,g=e.loadList,E=e.showModalCreateResource,y=e.location.query,O=y.page,h=void 0===O?0:O,j=y.pageSize,x=void 0===j?10:j,w=y.env,z=void 0===w?null:w,C=y.zone,k=void 0===C?null:C,P=y.query,T=void 0===P?"":P;Object(m["useEffect"])((function(){p(),g(0,10,T)}),[]);var M=[{title:"ID",key:"id",dataIndex:"id"},{title:"Env",key:"env",dataIndex:"env",filters:Object.keys(t).map((function(e){return{text:e,value:e}}))},{title:"Zone",key:"zone_code",dataIndex:"zone_code",filters:function(){var e={};return Object.keys(t).map((function(a){t[a].map((function(t){e[t.zone_code]=t}))})),Object.keys(e).map((function(e){return{text:e,value:e}}))}()},{title:"Name",key:"name",dataIndex:"name"},{title:"Tags",key:"tags",dataIndex:"tags",render:function(e){return e&&e.map((function(e){return f.a.createElement(d["a"],{color:"blue"},e)}))}},{title:"Description",key:"description",dataIndex:"description"},{title:"Latest Version",key:"latest_version",dataIndex:"latest_version",render:function(e){return f.a.createElement(d["a"],null,e)}},{title:"Last Update",key:"last_update",dataIndex:"last_update",render:function(e){return q()(e).format("YYYY-MM-DD HH:mm:ss")}}],S=function(t,a,n){g(t.current-1,t.pageSize,T,a.env,a.zone_code),e.dispatch(N["routerRedux"].push({query:Object(u["a"])(Object(u["a"])(Object(u["a"])({},e.location.query),a),{},{page:t.page,pageSize:t.pageSize})}))},L=function(t){e.dispatch(N["routerRedux"].push({query:Object(u["a"])(Object(u["a"])({},e.location.query),{},{query:t})})),g(h,x,t,z,k)};return f.a.createElement(v["PageHeaderWrapper"],null,f.a.createElement(n["a"],null,f.a.createElement(r["a"],{direction:"vertical",style:{width:"100%"}},f.a.createElement(o["a"],{justify:"space-between"},f.a.createElement(i["a"],null,f.a.createElement(s["default"],{onClick:function(){return E(!0)}},f.a.createElement(I["a"],null),"\u65b0\u5efa")),f.a.createElement(i["a"],null,f.a.createElement(l["a"].Search,{defaultValue:T,onSearch:L,placeholder:"\u641c\u7d22\u8d44\u6e90\u540d\u79f0"}))),f.a.createElement(c["a"],{loading:b,rowKey:"id",columns:[].concat(M,[{title:"\u64cd\u4f5c",render:function(t){return f.a.createElement(s["default"].Group,null,f.a.createElement(s["default"],{onClick:function(){console.log(t),e.showModalEdit(Object(u["a"])({visible:!0},t))}},"\u66f4\u65b0"))}}]),dataSource:a,onChange:S}))),f.a.createElement(R,{onOk:function(){return g()}}),f.a.createElement(V,{onOk:function(){return g()}}))}var H=function(e){var t=e.configResource;return{zoneEnv:t.zoneEnv,list:t.list,listLoading:t.listLoading,pagination:t.pagination}},Z=function(e){return{loadZoneEnvTree:function(){return e({type:"configResource/loadZoneEnvTree"})},loadList:function(t,a,n,r,c){return e({type:"configResource/loadList",payload:{page:t,pageSize:a,query:n,env:r,zone:c}})},showModalCreateResource:function(t){return e({type:"configResource/showModalCreateResource",payload:t})},showModalEdit:function(t){return e({type:"configResource/showModalEdit",payload:t})},dispatch:e}};t["default"]=Object(p["connect"])(H,Z)(L)},"5CnO":function(e,t,a){"use strict";var n=a("q1tI"),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM544 472c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v108H372c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h108v108c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V644h108c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V472z"}}]},name:"file-add",theme:"outlined"},c=r,o=a("6VBw"),l=function(e,t){return n["createElement"](o["a"],Object.assign({},e,{ref:t,icon:c}))};l.displayName="FileAddOutlined";t["a"]=n["forwardRef"](l)},"7DNP":function(e,t,a){e.exports=a("55Ip"),e.exports.routerRedux=a("L342")},DYRE:function(e,t,a){"use strict";a("cIOH"),a("OPEp")},IzEo:function(e,t,a){"use strict";a("cIOH"),a("lnY3"),a("Znn+"),a("14J3"),a("jCWc")},OPEp:function(e,t,a){},bx4M:function(e,t,a){"use strict";var n=a("q1tI"),r=a("TSYQ"),c=a.n(r),o=a("BGR+"),l=a("H84U");function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i.apply(this,arguments)}function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var u=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a},d=function(e){return n["createElement"](l["a"],null,(function(t){var a=t.getPrefixCls,r=e.prefixCls,o=e.className,l=e.hoverable,d=void 0===l||l,m=u(e,["prefixCls","className","hoverable"]),f=a("card",r),p=c()("".concat(f,"-grid"),o,s({},"".concat(f,"-grid-hoverable"),d));return n["createElement"]("div",i({},m,{className:p}))}))},m=d;function f(){return f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},f.apply(this,arguments)}var p=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a},v=function(e){return n["createElement"](l["a"],null,(function(t){var a=t.getPrefixCls,r=e.prefixCls,o=e.className,l=e.avatar,i=e.title,s=e.description,u=p(e,["prefixCls","className","avatar","title","description"]),d=a("card",r),m=c()("".concat(d,"-meta"),o),v=l?n["createElement"]("div",{className:"".concat(d,"-meta-avatar")},l):null,b=i?n["createElement"]("div",{className:"".concat(d,"-meta-title")},i):null,g=s?n["createElement"]("div",{className:"".concat(d,"-meta-description")},s):null,E=b||g?n["createElement"]("div",{className:"".concat(d,"-meta-detail")},b,g):null;return n["createElement"]("div",f({},u,{className:m}),v,E)}))},b=v,g=a("ZTPi"),E=a("BMrR"),y=a("kPKH"),O=a("3Nzz");function h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function j(){return j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},j.apply(this,arguments)}var x=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a};function w(e){var t=e.map((function(t,a){return n["createElement"]("li",{style:{width:"".concat(100/e.length,"%")},key:"action-".concat(a)},n["createElement"]("span",null,t))}));return t}var z=function(e){var t,a,r,i=n["useContext"](l["b"]),s=i.getPrefixCls,u=i.direction,d=n["useContext"](O["b"]),f=function(t){e.onTabChange&&e.onTabChange(t)},p=function(){var t;return n["Children"].forEach(e.children,(function(e){e&&e.type&&e.type===m&&(t=!0)})),t},v=e.prefixCls,b=e.className,z=e.extra,C=e.headStyle,k=void 0===C?{}:C,R=e.bodyStyle,I=void 0===R?{}:R,N=e.title,P=e.loading,T=e.bordered,M=void 0===T||T,V=e.size,S=e.type,q=e.cover,L=e.actions,H=e.tabList,Z=e.children,_=e.activeTabKey,B=e.defaultActiveTabKey,Y=e.tabBarExtraContent,A=e.hoverable,D=e.tabProps,K=void 0===D?{}:D,F=x(e,["prefixCls","className","extra","headStyle","bodyStyle","title","loading","bordered","size","type","cover","actions","tabList","children","activeTabKey","defaultActiveTabKey","tabBarExtraContent","hoverable","tabProps"]),J=s("card",v),G=0===I.padding||"0px"===I.padding?{padding:24}:void 0,Q=n["createElement"]("div",{className:"".concat(J,"-loading-block")}),U=n["createElement"]("div",{className:"".concat(J,"-loading-content"),style:G},n["createElement"](E["a"],{gutter:8},n["createElement"](y["a"],{span:22},Q)),n["createElement"](E["a"],{gutter:8},n["createElement"](y["a"],{span:8},Q),n["createElement"](y["a"],{span:15},Q)),n["createElement"](E["a"],{gutter:8},n["createElement"](y["a"],{span:6},Q),n["createElement"](y["a"],{span:18},Q)),n["createElement"](E["a"],{gutter:8},n["createElement"](y["a"],{span:13},Q),n["createElement"](y["a"],{span:9},Q)),n["createElement"](E["a"],{gutter:8},n["createElement"](y["a"],{span:4},Q),n["createElement"](y["a"],{span:3},Q),n["createElement"](y["a"],{span:16},Q))),W=void 0!==_,$=j(j({},K),(t={},h(t,W?"activeKey":"defaultActiveKey",W?_:B),h(t,"tabBarExtraContent",Y),t)),X=H&&H.length?n["createElement"](g["a"],j({size:"large"},$,{className:"".concat(J,"-head-tabs"),onChange:f}),H.map((function(e){return n["createElement"](g["a"].TabPane,{tab:e.tab,disabled:e.disabled,key:e.key})}))):null;(N||z||X)&&(r=n["createElement"]("div",{className:"".concat(J,"-head"),style:k},n["createElement"]("div",{className:"".concat(J,"-head-wrapper")},N&&n["createElement"]("div",{className:"".concat(J,"-head-title")},N),z&&n["createElement"]("div",{className:"".concat(J,"-extra")},z)),X));var ee=q?n["createElement"]("div",{className:"".concat(J,"-cover")},q):null,te=n["createElement"]("div",{className:"".concat(J,"-body"),style:I},P?U:Z),ae=L&&L.length?n["createElement"]("ul",{className:"".concat(J,"-actions")},w(L)):null,ne=Object(o["a"])(F,["onTabChange"]),re=V||d,ce=c()(J,b,(a={},h(a,"".concat(J,"-loading"),P),h(a,"".concat(J,"-bordered"),M),h(a,"".concat(J,"-hoverable"),A),h(a,"".concat(J,"-contain-grid"),p()),h(a,"".concat(J,"-contain-tabs"),H&&H.length),h(a,"".concat(J,"-").concat(re),re),h(a,"".concat(J,"-type-").concat(S),!!S),h(a,"".concat(J,"-rtl"),"rtl"===u),a));return n["createElement"]("div",j({},ne,{className:ce}),r,ee,te,ae)};z.Grid=m,z.Meta=b;t["a"]=z},lnY3:function(e,t,a){},zeV3:function(e,t,a){"use strict";var n=a("q1tI"),r=a("TSYQ"),c=a.n(r),o=a("Zm9Q"),l=a("H84U");function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i.apply(this,arguments)}function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var u=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a},d={small:8,middle:16,large:24},m=function(e){var t,a=n["useContext"](l["b"]),r=a.getPrefixCls,m=a.space,f=a.direction,p=e.size,v=void 0===p?(null===m||void 0===m?void 0:m.size)||"small":p,b=e.align,g=e.className,E=e.children,y=e.direction,O=void 0===y?"horizontal":y,h=e.prefixCls,j=u(e,["size","align","className","children","direction","prefixCls"]),x=Object(o["a"])(E),w=x.length;if(0===w)return null;var z=void 0===b&&"horizontal"===O?"center":b,C=r("space",h),k=c()(C,"".concat(C,"-").concat(O),(t={},s(t,"".concat(C,"-rtl"),"rtl"===f),s(t,"".concat(C,"-align-").concat(z),z),t),g),R="".concat(C,"-item"),I="rtl"===f?"marginLeft":"marginRight";return n["createElement"]("div",i({className:k},j),x.map((function(e,t){return n["createElement"]("div",{className:R,key:"".concat(R,"-").concat(t),style:t===w-1?{}:s({},"vertical"===O?"marginBottom":I,"string"===typeof v?d[v]:v)},e)})))};t["a"]=m}}]);