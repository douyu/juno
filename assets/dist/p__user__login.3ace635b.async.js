(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[28],{"3T1H":function(e,a,t){"use strict";t.r(a);t("T2oS");var n=t("W9HT"),r=(t("Mwp2"),t("VXEj")),c=(t("+L6B"),t("2/Rp")),o=t("WmNS"),i=t.n(o),l=(t("miYZ"),t("tsqr")),s=t("k1fw"),u=t("9og8"),m=t("tJVT"),p=(t("fOrg"),t("+KLJ")),d=t("q1tI"),b=t.n(d),f=t("9kvl"),g=t("55Ip"),h=t("c+yx"),_=t("trCS"),E=t("63rs"),v=(t("y8nQ"),t("Vl3Y")),O=(t("Znn+"),t("ZTPi")),j=t("KQm4"),w=t("ODXe"),y=t("yUgw"),C=t("TSYQ"),N=t.n(C),x=Object(d["createContext"])({}),k=x,T=(t("14J3"),t("BMrR")),L=(t("jCWc"),t("kPKH")),S=(t("5NDa"),t("5rEg")),P=t("wx14"),I=t("o0o1"),U=t.n(I),F=t("HaE+"),J=t("Ff2n"),V=t("BGR+"),A=t("cJ7L"),q=t("MGYb"),D=t("FQ2w"),M=t("cGnJ"),G=t("DdhY"),K=t.n(G),z={UserName:{props:{size:"large",id:"userName",prefix:b.a.createElement(A["a"],{style:{color:"#1890ff"},className:K.a.prefixIcon}),placeholder:"admin"},rules:[{required:!0,message:"Please enter username!"}]},Password:{props:{size:"large",prefix:b.a.createElement(q["a"],{className:K.a.prefixIcon}),type:"password",id:"password",placeholder:"888888"},rules:[{required:!0,message:"Please enter password!"}]},Mobile:{props:{size:"large",prefix:b.a.createElement(D["a"],{className:K.a.prefixIcon}),placeholder:"mobile number"},rules:[{required:!0,message:"Please enter mobile number!"},{pattern:/^1\d{10}$/,message:"Wrong mobile number format!"}]},Captcha:{props:{size:"large",prefix:b.a.createElement(M["a"],{className:K.a.prefixIcon}),placeholder:"captcha"},rules:[{required:!0,message:"Please enter Captcha!"}]}},B=v["a"].Item,H=function(e){var a=e.onChange,t=e.defaultValue,n=e.customProps,r=void 0===n?{}:n,c=e.rules,o={rules:c||r.rules};return a&&(o.onChange=a),t&&(o.initialValue=t),o},Q=function(e){var a=Object(d["useState"])(e.countDown||0),t=Object(w["a"])(a,2),n=t[0],r=t[1],o=Object(d["useState"])(!1),i=Object(w["a"])(o,2),s=i[0],u=i[1],m=(e.onChange,e.customProps),p=(e.defaultValue,e.rules,e.name),f=(e.getCaptchaButtonText,e.getCaptchaSecondText,e.updateActive,e.type),g=(e.tabUtil,Object(J["a"])(e,["onChange","customProps","defaultValue","rules","name","getCaptchaButtonText","getCaptchaSecondText","updateActive","type","tabUtil"])),h=Object(d["useCallback"])(function(){var e=Object(F["a"])(U.a.mark((function e(a){var t;return U.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(E["b"])(a);case 2:if(t=e.sent,!1!==t){e.next=5;break}return e.abrupt("return");case 5:l["a"].success("\u83b7\u53d6\u9a8c\u8bc1\u7801\u6210\u529f\uff01\u9a8c\u8bc1\u7801\u4e3a\uff1a1234"),u(!0);case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),[]);if(Object(d["useEffect"])((function(){var a=0,t=e.countDown;return s&&(a=window.setInterval((function(){r((function(e){return e<=1?(u(!1),clearInterval(a),t||60):e-1}))}),1e3)),function(){return clearInterval(a)}}),[s]),!p)return null;var _=H(e),v=g||{};if("Captcha"===f){var O=Object(V["a"])(v,["onGetCaptcha","countDown"]);return b.a.createElement(B,{shouldUpdate:!0,noStyle:!0},(function(e){var a=e.getFieldValue;return b.a.createElement(T["a"],{gutter:8},b.a.createElement(L["a"],{span:16},b.a.createElement(B,Object(P["a"])({name:p},_),b.a.createElement(S["a"],Object(P["a"])({},m,O)))),b.a.createElement(L["a"],{span:8},b.a.createElement(c["default"],{disabled:s,className:K.a.getCaptcha,size:"large",onClick:function(){var e=a("mobile");h(e)}},s?"".concat(n," \u79d2"):"\u83b7\u53d6\u9a8c\u8bc1\u7801")))}))}return b.a.createElement(B,Object(P["a"])({name:p},_),b.a.createElement(S["a"],Object(P["a"])({},m,v)))},W={};Object.keys(z).forEach((function(e){var a=z[e];W[e]=function(t){return b.a.createElement(k.Consumer,null,(function(n){return b.a.createElement(Q,Object(P["a"])({customProps:a.props,rules:a.rules},t,{type:e},n,{updateActive:n.updateActive}))}))}}));var Y=W,R=v["a"].Item,Z=function(e){var a=e.className,t=Object(J["a"])(e,["className"]),n=N()(K.a.submit,a);return b.a.createElement(R,null,b.a.createElement(c["default"],Object(P["a"])({size:"large",className:n,type:"primary",htmlType:"submit"},t)))},X=Z,$=O["a"].TabPane,ee=function(){var e=0;return function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e+=1,"".concat(a).concat(e)}}(),ae=function(e){Object(d["useEffect"])((function(){var a=ee("login-tab-"),t=e.tabUtil;t&&t.addTab(a)}),[]);var a=e.children;return b.a.createElement($,e,e.active&&a)},te=function(e){return b.a.createElement(k.Consumer,null,(function(a){return b.a.createElement(ae,Object(P["a"])({tabUtil:a.tabUtil},e))}))};te.typeName="LoginTab";var ne=te,re=function(e){var a=e.className,t=Object(d["useState"])([]),n=Object(w["a"])(t,2),r=n[0],c=n[1],o=Object(d["useState"])({}),i=Object(w["a"])(o,2),l=i[0],s=i[1],u=Object(y["a"])("",{value:e.activeKey,onChange:e.onTabChange}),m=Object(w["a"])(u,2),p=m[0],f=m[1],g=[],h=[];return b.a.Children.forEach(e.children,(function(e){e&&("LoginTab"===e.type.typeName?g.push(e):h.push(e))})),b.a.createElement(k.Provider,{value:{tabUtil:{addTab:function(e){c([].concat(Object(j["a"])(r),[e]))},removeTab:function(e){c(r.filter((function(a){return a!==e})))}},updateActive:function(e){l&&(l[p]?l[p].push(e):l[p]=[e],s(l))}}},b.a.createElement("div",{className:N()(a,K.a.login)},b.a.createElement(v["a"],{form:e.from,onFinish:function(a){e.onSubmit&&e.onSubmit(a)}},r.length?b.a.createElement(b.a.Fragment,null,b.a.createElement(O["a"],{animated:!1,className:K.a.tabs,activeKey:p,onChange:function(e){f(e)}},g),h):e.children)))};re.Tab=ne,re.Submit=X,re.UserName=Y.UserName,re.Password=Y.Password,re.Mobile=Y.Mobile,re.Captcha=Y.Captcha;var ce=re,oe=t("oN5p"),ie=t("kgi0"),le=t("dW82"),se=t("CyIy"),ue=t.n(se),me=t("MuoO"),pe=t("71ry"),de=t("aCH8"),be=ce.Tab,fe=ce.UserName,ge=ce.Password,he=ce.Submit,_e=function(e){var a=e.content;return b.a.createElement(p["a"],{style:{marginBottom:24},message:a,type:"error",showIcon:!0})},Ee=function(){var e=new URL(window.location.href),a=Object(h["a"])(),t=a,n=t.redirect;if(n){var r=new URL(n);if(r.origin!==e.origin)return void(window.location.href="/");n=n.substr(e.origin.length),n.match(/^\/.*#/)&&(n=n.substr(n.indexOf("#")+1))}f["F"].replace(n||"/")},ve={github:{icon:b.a.createElement(oe["a"],null),title:"GitHub"},gitlab:{icon:b.a.createElement(ie["a"],null),title:"GitLab"},google:{icon:b.a.createElement(le["a"],null),title:"Google"},generic_oauth:{icon:b.a.createElement(pe["LoginOutlined"],null),title:"Generic OAuth"}},Oe=function(e){var a=e.configLoading,t=e.dispatch,o=e.disableLoginForm,p=e.oauth,h=Object(d["useState"])({}),v=Object(m["a"])(h,2),O=v[0],j=v[1],w=Object(d["useState"])(!1),y=Object(m["a"])(w,2),C=y[0],N=y[1],x=Object(f["P"])("@@initialState"),k=x.refresh,T=Object(d["useState"])("account"),L=Object(m["a"])(T,2),S=L[0],P=L[1];Object(d["useEffect"])((function(){t({type:"system/loadSystemConfig"})}),[]);var I=function(){var e=Object(u["a"])(i.a.mark((function e(a){var t;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return N(!0),e.prev=1,a.password=de(a.password),e.next=5,Object(E["a"])(Object(s["a"])(Object(s["a"])({},a),{},{type:S}));case 5:if(t=e.sent,0!==t.code){e.next=13;break}return l["a"].success("\u767b\u9646\u6210\u529f\uff01"),Ee(),setTimeout((function(){k()}),0),e.abrupt("return");case 13:l["a"].error(t.msg);case 14:j(t),e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](1),l["a"].error("\u767b\u9646\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5\uff01");case 20:N(!1);case 21:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(a){return e.apply(this,arguments)}}(),U=O.code,F=O.msg,J=b.a.createElement(be,{key:"account",tab:"\u8d26\u6237\u5bc6\u7801\u767b\u5f55"},1===U&&"account"===F&&!C&&b.a.createElement(_e,{content:"\u8d26\u6237\u6216\u5bc6\u7801\u9519\u8bef\uff08admin/confgo\uff09"}),b.a.createElement(fe,{name:"userName",placeholder:"\u7528\u6237\u540d: admin",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d!"}]}),b.a.createElement(ge,{name:"password",placeholder:"\u5bc6\u7801: admin",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801\uff01"}]}),b.a.createElement(he,{loading:C},"\u767b\u5f55")),V=Object.keys(p).map((function(e){var a=ve[e];return b.a.createElement(r["b"].Item,{key:e},b.a.createElement(c["default"],{style:{width:"100%"},onClick:function(){window.open("/api/admin/user/login/".concat(e),"_blank")}},a.icon," ",a.title))})),A=[];o?"3rd_party"!=S&&P("3rd_party"):A.push(J),A.push(b.a.createElement(be,{key:"3rd_party",tab:"\u7b2c\u4e09\u65b9\u8d26\u6237\u767b\u5f55"},V.length>0?b.a.createElement(r["b"],null,V):b.a.createElement("div",{className:ue.a.noOAuthLoginChoices},b.a.createElement(pe["ExclamationCircleOutlined"],null)," \u6682\u672a\u914d\u7f6e\u7b2c\u4e09\u65b9\u767b\u5f55")));var q=function(){return a?b.a.createElement("div",{className:ue.a.configLoading},b.a.createElement(n["default"],{tip:"\u7cfb\u7edf\u914d\u7f6e\u52a0\u8f7d\u4e2d..."})):b.a.createElement(ce,{activeKey:S,onTabChange:P,onSubmit:I},A)};return b.a.createElement("div",{className:ue.a.container},b.a.createElement("div",{className:ue.a.lang},b.a.createElement(_["a"],null)),b.a.createElement("div",{className:ue.a.content},b.a.createElement("div",{className:ue.a.top},b.a.createElement("div",{className:ue.a.header},b.a.createElement(g["Link"],{to:"/"},b.a.createElement("span",{className:ue.a.title},"Juno"))),b.a.createElement("div",{className:ue.a.desc},"\u5fae\u670d\u52a1\u6cbb\u7406\u5e73\u53f0")),b.a.createElement("div",{className:ue.a.main},q())))},je=function(e){var a=e.system;return{configLoading:a.configLoading,appUrl:a.appUrl,authProxyEnabled:a.authProxyEnabled,disableLoginForm:a.disableLoginForm,oauth:a.oauth}};a["default"]=Object(me["connect"])(je)(Oe)},CyIy:function(e,a,t){e.exports={container:"container___12Qu8",lang:"lang___2ixE3",content:"content___5CWAk",top:"top___ETIlk",header:"header___1Q-qN",logo:"logo___3JC30",title:"title___3ww2k",desc:"desc___3x2Vm",main:"main___2rucS",configLoading:"configLoading___1DcMj",noOAuthLoginChoices:"noOAuthLoginChoices___OtbsH",icon:"icon___5TklJ",other:"other___3tFpJ",register:"register___1VMmz"}},DdhY:function(e,a,t){e.exports={login:"login___LFxDs",getCaptcha:"getCaptcha___9F10t",icon:"icon___2VK3K",other:"other___2F7Be",register:"register___31gTm",prefixIcon:"prefixIcon___dN9_f",submit:"submit___Q43EO"}}}]);